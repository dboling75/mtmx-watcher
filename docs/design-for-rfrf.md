# RFRF Design

## Overview
TCH/GPT has checked:
- Customer agrees to RFRF (approval)

Checks to perform:
- Account validation (inline)
- Must not O/D the account (current balance must be >= RFRF amount)

## RFRF Endpoint
Inbound Schema:
- See PACS.004 (base off this)


## RFRF Message Schema (PACS.004)

| Field Name | Description | XML Path | Sample Data |
|------------|-------------|----------|-------------|
| **Message Identification** | Unique ID for the pacs.004 message generated by the sending FI | `/Document/PmtRtr/GrpHdr/MsgId` | `RFRF-20250814-ABC123` |
| **Creation DateTime** | Timestamp the pacs.004 was created | `/Document/PmtRtr/GrpHdr/CreDtTm` | `2025-08-14T15:32:45Z` |
| **Original Message ID** | MsgId of the original pacs.008 credit transfer | `/Document/PmtRtr/TxInf/OrgnlGrpInf/OrgnlMsgId` | `RTP-20250813-XYZ789` |
| **Original Message Name ID** | Identifies the original message type (pacs.008) | `/Document/PmtRtr/TxInf/OrgnlGrpInf/OrgnlMsgNmId` | `pacs.008.001.08` |
| **Original EndToEnd ID** | Original customer-assigned end-to-end ID from pacs.008 | `/Document/PmtRtr/TxInf/OrgnlEndToEndId` | `E2E-REF-998877` |
| **Original Transaction ID** | FI-assigned transaction ID from pacs.008 | `/Document/PmtRtr/TxInf/OrgnlTxId` | `TX1234567890` |
| **Original Clearing System Reference** | Network-level unique reference assigned by TCH in the pacs.008 | `/Document/PmtRtr/TxInf/OrgnlTxRef/PmtId/ClrSysRef` | `202508130000001234567890` |
| **Original Interbank Settlement Amount** | Amount of the original credit transfer | `/Document/PmtRtr/TxInf/OrgnlIntrBkSttlmAmt` | `1250.00` |
| **Original Settlement Date** | Settlement date of the original credit transfer | `/Document/PmtRtr/TxInf/OrgnlIntrBkSttlmDt` | `2025-08-13` |
| **Return Reason Code** | ISO 20022 reason code for the return (for RFRF this would indicate return of funds request) | `/Document/PmtRtr/TxInf/RtrRsnInf/Rsn/Cd` | `FRAD` (fraud) or `CUST` (customer request) |
| **Return Reason Additional Info** | Free-text description of the return reason | `/Document/PmtRtr/TxInf/RtrRsnInf/AddtlInf` | `Request for Return of Funds due to suspected fraud.` |
| **Returned Amount** | Amount being returned (may be less than or equal to original) | `/Document/PmtRtr/TxInf/RtrdIntrBkSttlmAmt` | `1250.00` |
| **Debtor Name** | Name of party returning the funds | `/Document/PmtRtr/TxInf/Dbtr/Nm` | `Example Bank, N.A.` |
| **Creditor Name** | Name of original credit party (payee) | `/Document/PmtRtr/TxInf/Cdtr/Nm` | `John Doe` |
